<polymer-element name="livepal-ui">

  <template>

  <core-media-query query="max-width: 40em" queryMatches="{{devices.mobile}}"></core-media-query>
  <core-media-query query="min-width: 40.063em" queryMatches="{{devices.large}}"></core-media-query>

  <core-style ref="livepal-ui"></core-style>

    <core-toolbar id="toolbar" horizontal center-justified layout>
      <h1>livepal</h1>
    </core-toolbar>

    <core-animated-pages transitions="slide-down slide-up" selected="{{selected}}" selectedindex="0" id="main" on-core-animated-pages-transition-end="{{complete}}" flex>

      <section>
        <div class="container" slide-down horizontal center-justified layout>
          <div class="{{ {'card': devices.mobile, 'card-large': devices.large} | tokenList}}" flex?="{{devices.mobile}}" vertical center layout>
            <paper-shadow z="{{devices.mobile | zValue}}"></paper-shadow>
            <core-toolbar class="card-toolbar" horizontal layout center>
              <h2 class="card-title">Choose a username</h2>
            </core-toolbar>
            <paper-input id="username" floatingLabel="true" label="Username" required error="5 to 20 characters without spaces" pattern="^\S{5,20}$"></paper-input>
            <template if="{{devices.large}}">
              <paper-fab icon="done" hidden?="{{pageTransitionIsActive || $.username.inputValue | isInvalid}}" on-tap="{{switch}}" data-target="1" class="validate-large"></paper-fab>
            </template>
          </div>
          <template if="{{devices.mobile}}">
            <paper-fab icon="done" hidden?="{{pageTransitionIsActive || $.username.inputValue | isInvalid}}" on-tap="{{switch}}" data-target="1" class="validate"></paper-fab>
          </template>
        </div>
      </section>

      <section>
        <div class="container" slide-up horizontal center-justified layout>
          <div class="{{ {'card': devices.mobile, 'card-large': devices.large} | tokenList}}" flex?="{{devices.mobile}}" vertical center layout>
            <paper-shadow z="{{devices.mobile | zValue}}"></paper-shadow>
            <core-toolbar class="card-toolbar" horizontal layout center>
              <h2 class="card-title">Make a gifie</h2>
            </core-toolbar>
            <video id="video" hidden?="{{gifieProgress === 0 || gifieProgress === 100}}" class="{{ {'mobileAsset': devices.mobile} | tokenList}}"></video>
            <img src="../images/user.svg" on-tap="{{makeGifie}}" id="gifie" hidden?="{{gifieProgress > 0 && gifieProgress < 100}}" class="{{ {'mobileAsset': devices.mobile} | tokenList}}">
            <paper-progress value="{{gifieProgress}}" hidden?="{{gifieProgress === 0 || gifieProgress === 100}}"></paper-progress>
            <template if="{{devices.large}}">
              <paper-fab icon="chevron-left" on-tap="{{switch}}" data-target="0" class="cancel-large" hidden?="{{pageTransitionIsActive}}"></paper-fab>
              <paper-fab icon="chevron-right" on-tap="{{switch}}" data-target="2" class="validate-large" hidden?="{{pageTransitionIsActive || gifieProgress !== 100}}"></paper-fab>
            </template>
          </div>
          <template if="{{devices.mobile}}">
            <paper-fab icon="chevron-left" on-tap="{{switch}}" data-target="0" class="cancel" hidden?="{{pageTransitionIsActive}}"></paper-fab>
            <paper-fab icon="chevron-right" on-tap="{{switch}}" data-target="2" class="validate" hidden?="{{pageTransitionIsActive || gifieProgress !== 100}}"></paper-fab>
          </template>
        </div>
      </section>

      <section>
        <div class="container" slide-down horizontal center-justified layout>
          <div class="{{ {'card': devices.mobile, 'card-large': devices.large} | tokenList}}" flex?="{{devices.mobile}}" vertical center layout>
            <paper-shadow z="{{devices.mobile | zValue}}"></paper-shadow>
            <core-toolbar class="card-toolbar" horizontal layout center>
              <h2 class="card-title">Hi {{$.username.value}}</h2>
            </core-toolbar>
            <img src="{{gifieData}}" class="{{ {'mobileAsset': devices.mobile} | tokenList}}">
            <template if="{{devices.large}}">
              <paper-fab icon="done" on-tap="{{switch}}" data-target="0" class="validate-large" hidden?="{{pageTransitionIsActive}}"></paper-fab>
            </template>
          </div>
          <template if="{{devices.mobile}}">
            <paper-fab icon="done" on-tap="{{switch}}" data-target="0" class="validate" hidden?="{{pageTransitionIsActive}}"></paper-fab>
          </template>
        </div>
      </section>

    </core-animated-pages>

  </template>

</polymer-element>